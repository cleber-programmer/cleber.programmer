{"version":3,"sources":["bootstrap.js"],"names":["Rex","atom","memoize","radio","Input","component","event","e","test","key","triggerNewItem","clearValue","getInput","value","querySelector","emit","storage","List","attached","detached","item","set","get","concat","render","on","addItem","drop","innerHTML","map","v","i","join","Item","classList","target","checked","filter","getId","toggle","focus","setSelectionRange","getAttribute","getValue","save","editingToggleItem"],"mappings":"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","file":"bootstrap.min.js","sourcesContent":["Rex(function ({ atom, memoize, radio }) {\r\n\r\n  @atom.component('todo-header', 'header')\r\n\tclass Input {\r\n\r\n\t\t@atom.event('keypress')\r\n\t\taction (e) {\r\n\t\t\treturn (/enter/i.test(e.key) && this.triggerNewItem().clearValue()), this;\r\n\t\t}\r\n\r\n\t\tclearValue() {\r\n\t\t\treturn this.getInput().value = '', this;\r\n\t\t}\r\n\r\n    @memoize\r\n    getInput() {\r\n      return this.querySelector('input');\r\n    }\r\n\r\n    triggerNewItem() {\r\n      return radio.emit('list:add', this.getInput().value), this;\r\n    }\r\n\r\n\t}\r\n\r\n});\r\n\r\nRex(function ({ atom, radio, storage }) {\r\n\r\n  @atom.component('todo-list', 'ul')\r\n  class List {\r\n\r\n    addItem(item) {\r\n      return storage.set('items', storage.get('items', []).concat(item)), this.render();\r\n    }\r\n\r\n    @atom.attached\r\n    build() {\r\n      this.radio = radio(this).on('list:add', this.addItem, this).on('list:refresh', this.render, this);\r\n      this.render();\r\n      return this;\r\n    }\r\n\r\n    @atom.detached\r\n    destroy() {\r\n      this.radio.drop();\r\n    }\r\n\r\n    render() {\r\n      return this.innerHTML = storage.get('items', []).map((v, i) => `<li is=\"todo-item\" id=\"${i}\"></li>`).join(''), this;\r\n    }\r\n\r\n  }\r\n\r\n});\r\n\r\nRex(function ({ atom, memoize, radio, storage }) {\r\n\r\n  @atom.component('todo-item', 'li')\r\n  class Item {\r\n\r\n    @atom.event('click', 'input.toggle')\r\n    completedItem(e) {\r\n      return this.classList[e.target.checked ? 'add' : 'remove']('completed'), this;\r\n    }\r\n\r\n    @atom.event('click', 'button.destroy')\r\n    destroyItem() {\r\n      storage.set('items', storage.get('items',  []).filter((v, i) => i != this.getId()));\r\n      radio.emit('list:refresh');\r\n      return this;\r\n    }\r\n\r\n    @atom.event('dblclick', 'label')\r\n    editingToggleItem() {\r\n      return this.classList.toggle('editing'), this.focus();\r\n    }\r\n\r\n    focus() {\r\n      return this.getInput().focus(), this.getInput().setSelectionRange(1024, 1025), this;\r\n    }\r\n\r\n    getId() {\r\n      return this.getAttribute('id');\r\n    }\r\n\r\n    @memoize\r\n    getInput() {\r\n      return this.querySelector('input.edit');\r\n    }\r\n\r\n    getValue() {\r\n      return storage.get('items', [])[this.getId()];\r\n    }\r\n\r\n    @atom.attached\r\n    render() {\r\n      this.innerHTML = `\r\n        <div class=\"view\">\r\n          <input class=\"toggle\" type=\"checkbox\">\r\n          <label>${ this.getValue() }</label>\r\n          <button class=\"destroy\"></button>\r\n        </div>\r\n        <input class=\"edit\" value=\"${ this.getValue() }\">\r\n      `;\r\n      return this;\r\n    }\r\n\r\n    save() {\r\n      storage.set('items', storage.get('items',  []).map((v, i) => i == this.getId() ? this.getInput().value : v));\r\n      return this;\r\n    }\r\n\r\n    @atom.event('blur', 'input.edit', true)\r\n    @atom.event('change', 'input.edit')\r\n    updateItem(e) {\r\n      return /enter|undefined/i.test(e.key) && (this.save().editingToggleItem().render());\r\n    }\r\n\r\n  }\r\n\r\n});"]}