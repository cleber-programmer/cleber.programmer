{"version":3,"sources":["services/getEvents.js","services/getHotels.js","services/query.js","services/template.js","widgets/events/events.date.js","widgets/events/events.day.js","widgets/events/events.js","widgets/events/events.klass.js","widgets/events/events.month.js","widgets/events/events.state.js","widgets/hotel/hotel.js","widgets/hotel/hotel.state.js","widgets/hotels/hotels.close.js","widgets/hotels/hotels.js","widgets/hotels/hotels.open.js","widgets/hotels/hotels.state.js","widgets/image/image.js"],"names":["Rex","fetch","json","location","search","substring","split","map","parameter","reduce","target","key","value","query","data","Function","document","querySelector","innerHTML","replace","join","day","month","startDate","endDate","date","shift","atom","template","state","Event","component","attached","always","cond","test","a","getEvents","klass","events","Hotel","getHotels","id","r","el","paint","toggle","close","created","event","assign","parentNode","dataset","e","preventDefault","render","hotels","Image","requestAnimationFrame","style","backgroundImage","getAttribute"],"mappings":"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","file":"evnts.min.js","sourcesContent":["Rex('getEvents', function () {\n\n  /**\n   * Retorna lista de eventos\n   */\n  return async function () {\n    return await (await fetch('http://eng.evnts.rocks/events')).json();\n  };\n\n});","Rex('getHotels', function () {\n\n  /**\n   * Retorna lista de hoteis\n   */\n  return async function () {\n    return await (await fetch('http://eng.evnts.rocks/hotels')).json();\n  };\n\n});","Rex('query', function () {\n\n  /**\n   * Retorna um objeto com cave e valor dos parametros\n   * exeistente da url\n   */\n  return function () {\n    return location.search\n                   .substring(1)\n                   .split('&')\n                   .map((parameter) =>\n                      parameter.split('='))\n                   .reduce((target, [key, value]) =>\n                      Object.assign(target, { [key]: value }), {});\n  };\n\n});","Rex('template', function () {\n\n  /**\n   * Motor de template, utilizado para montar os layouts\n   * dos componentes\n   */\n  return function (query, data) {\n    return (Function(\"d\", \"var p=[];with(d){p.push('\" +\n      document.querySelector(query)\n              .innerHTML\n              .replace(/[\\r\\t\\n]/g, \" \")\n              .split(\"<%\")\n              .join(\"\\t\")\n              .replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\n              .replace(/\\t=(.*?)%>/g, \"',$1,'\")\n              .split(\"\\t\")\n              .join(\"');\")\n              .split(\"%>\")\n              .join(\"p.push('\")\n              .split(\"\\r\")\n              .join(\"\\\\'\")+ \"');}return p.join('');\")\n    )(data);\n  };\n\n});","Rex('events.date', function ({ ['events.day']: day, ['events.month']: month }) {\n\n  /**\n   * Retorna a data formatada para ser utilizado\n   * no template dos eventos\n   */\n  return function({ startDate, endDate }) {\n    return `${ day(startDate) }, ${ day(endDate) } de ${ month(endDate) }`;\n  };\n\n});","Rex('events.day', function () {\n\n  /**\n   * Retorna o dia de uma data\n   */\n  return function (date) {\n    return date.split('/').shift();\n  };\n\n});","Rex(function ({ atom, template, ['events.state']: state }) {\n\n  /**\n   * Componente responsavel pela listagem dos eventos\n   */\n  @atom.component('evnts-event', 'ul')\n  class Event {\n\n    /**\n     * Renderiza o template quando o componente\n     * for atachado no DOM\n     */\n    @atom.attached\n    async render() {\n      this.innerHTML = template('#events', await state());\n    }\n\n  }\n\n});","Rex('events.klass', function ({ always, cond }) {\n\n  /**\n   * Retorna os modificadores de classes para alinhar\n   * os eventos no topo, na esquerda ou direita\n   */\n  return cond(\n      [a => /0/.test(a), always('')]\n    , [a => /1/.test(a % 2), always('-odd')]\n    , [a => /0/.test(a % 2), always('-pair')]\n  );\n\n});","Rex('events.month', function () {\n\n  /**\n   * Retorna o mes correspondente\n   */\n  return function (date) {\n    return {\n        '01': 'Janeiro'\n      , '02': 'Fevereiro'\n      , '03': 'Mar√ßo'\n      , '04': 'Abril'\n      , '05': 'Maio'\n      , '06': 'Junho'\n      , '07': 'Julho'\n      , '08': 'Agosto'\n      , '09': 'Setembro'\n      , '10': 'Outubro'\n      , '11': 'Novembro'\n      , '12': 'Dezembro'\n    }[date.split('/')[1]];\n  };\n\n});","Rex('events.state', function ({ getEvents, ['events.date']: date, ['events.klass']: klass }) {\n\n  /**\n   * Retorna o stado atual do componente\n   */\n  return async function () {\n    return { date, klass, events: await getEvents() };\n  };\n\n});","Rex(function ({ atom, template, ['hotel.state']: state }) {\n\n  /**\n   * Componente responsavel por renderizar o layout de hotel\n   */\n  @atom.component('evnts-hotel', 'main')\n  class Hotel {\n\n    /**\n     * Printa a tela de Hotel, quando o componente for\n     * atachado no DOM\n     */\n    @atom.attached\n    async render() {\n      this.innerHTML = template('#hotel', await state());\n    }\n\n  }\n\n});","Rex('hotel.state', function ({ getHotels, query }) {\n\n  /**\n   * Retorna o estado atual da tela de hotel, com o hotel\n   * correspondente do parametro id\n   */\n  return async function () {\n    return (await getHotels())[--query().id];\n  };\n\n});","Rex('hotels.close', function (r) {\n\n  /**\n   * Retorna uma classe responsavel pelo estado fechado\n   * do componente hotels\n   */\n  return function (el) {\n\n    /**\n     * Printa o template do estado de fechado\n     */\n    function paint() {\n      return '<a class=\"event_more\" href=\"#\">Ver hoteis</a>';\n    }\n\n    /**\n     * Troca o estado atual do template de close para open\n     */\n    Object.assign(paint, {\n      toggle(){\n        return el.paint = r['hotels.open'](el), el;\n      }\n    });\n\n    /**\n     * Revelation pattern\n     */\n    return paint;\n\n  };\n\n});","Rex(function ({ atom, ['hotels.close']: close }) {\n\n  /**\n   * Componente responsavel pelo renderizacao dos hoteis\n   * do evento relacionado\n   */\n  @atom.component('evnts-hotels', 'section')\n  class Hotel {\n\n    /**\n     * Determina o estado inicia do componente, por padrao\n     * o estado close\n     */\n    @atom.created\n    build() {\n      this.paint = close(this);\n    }\n\n    /**\n     * Printa o template do estado atual quando o componente\n     * for atachado no DOM\n     */\n    @atom.attached\n    async render() {\n      this.innerHTML = await this.paint();\n    }\n\n    /**\n     * Redireciona para apagin ade hotel, com o parametro do\n     * item selecionado\n     */\n    @atom.event('click', 'td')\n    select({ target }) {\n      location.assign(`./hotel.html?id=${ target.parentNode.dataset.id }`);\n    }\n\n    /**\n     * Altera o estado no componten posteriormente renderizando\n     * o novo template\n     */\n    @atom.event('click', 'a')\n    toggle(e) {\n      e.preventDefault();\n      this.paint.toggle().render();\n    }\n    \n  }\n\n});","Rex('hotels.open', function (r) {\n\n  /**\n   * Retorna uma classe responsavel pelo estado aberto\n   * do componente hotels\n   */\n  return function (el) {\n\n    /**\n     * Printa o template do estado de aberto, utilizando do\n     * motor de templte\n     */\n    async function paint() {\n      return r.template('#hotels', await r['hotels.state']());\n    }\n\n    /**\n     * Troca o estado atual do template de close para open\n     */\n    Object.assign(paint, {\n      toggle(){\n        return el.paint = r['hotels.close'](el), el;\n      }\n    });\n\n    /**\n     * Revelation pattern\n     */\n    return paint;\n\n  };\n\n});","Rex('hotels.state', function ({ getHotels }) {\n\n  /**\n   * Retorna o estado atual do componente de hotels\n   */\n  return async function () {\n    return await { hotels: await getHotels() };\n  };\n\n});","Rex(function ({ atom }) {\n\n  /**\n   * Componente responsave por data start ao\n   * carregamento da imagem, utilizando a GPU para otimizar\n   * o load da pagina\n   */\n  @atom.component('evnts-image', 'section')\n  class Image {\n\n    /**\n     * Inicia o carregamento da image quando o componente\n     * for atachado no DOM\n     */\n    @atom.attached\n    echo() {\n      requestAnimationFrame(() =>\n        this.style.backgroundImage = `url(${ this.getAttribute('src') })`\n      )\n    }\n\n  }\n\n});"]}