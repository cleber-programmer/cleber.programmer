{"version":3,"sources":["rex.js","atom.js","attached.js","change.js","component.js","created.js","detached.js","event.js","flip.js","guid.js","after.js","before.js","hook.js","memoize.js","emit.js","handlers.js","radio.js","drop.js","get.js","remove.js","set.js","storage.js"],"names":["modules","proxy","_extends","window","Rex","nameOrModule","module","push","onload","forEach","Proxy","@","get","target","name","receiver","_ref","atom","hook","attached","prop","descriptor","after","this","change","contains","value","test","properties","indexOf","_len","arguments","length","Array","_key","before","oldValue","newValue","predicate","call","component","tagName","extending","document","registerElement","_defineProperty","prototype","Object","create","HTMLElement","created","detached","event","query","undefined","bubbling","action","e","matches","addEventListener","bind","removeEventListener","args","apply","reverse","Date","now","Math","random","toString","method","concat","flip","key","radio","handlers","emit","channel","_iterator","entries","_isArray","isArray","_i","Symbol","iterator","_ref4","next","done","_ref2","_ref3","_slicedToArray","context","_iterator2","_isArray2","_i2","_ref5","JSON","parse","stringify","Map","drop","clear","off","delete","on","add","set","Set","storage","localStorage","defaultValue","getItem","remove","removeItem","is","setItem"],"mappings":"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","file":"rex.min.js","sourcesContent":["(function (modules, proxy) {\r\n\r\n  /**\r\n   * Extendo o objeto window, com o modulo 'Rex' e subscrevo\r\n   * o evento onload\r\n   */\r\n  Object.assign(window, {\r\n\r\n    /**\r\n     * Principal Funcao responsavel por registrar e consumir\r\n     * Modulos, utilizando-se da sobrecarga\r\n     */\r\n    Rex(nameOrModule, module) {\r\n      module ? (proxy[nameOrModule] = module) : modules.push(nameOrModule);\r\n    },\r\n\r\n    /**\r\n     * Inicializacao dos Modulos aguarda o evento onload, permitindo\r\n     * hoisting dos Modulos registrado\r\n     */\r\n    onload() {\r\n      modules.forEach(module => module(proxy));\r\n    }\r\n\r\n  });\r\n\r\n/**\r\n * Inicializa o Modulo passando como parametro, um Array Literal e\r\n * um Proxy que faz todo o trabalho de Injecao de Dependencia\r\n */\r\n})([], new Proxy({ '@': {} }, {\r\n  \r\n  /**\r\n   * Intermedeia as chamadas dos Modulos, memoizando o retorno da Funcao\r\n   * construtora\r\n   */\r\n  get(target, name, receiver) {\r\n    return target['@'][name] || (target['@'][name] = target[name](receiver));\r\n  }\r\n  \r\n}));","Rex('atom', () => ({}));","Rex(function ({ atom, hook }) {\r\n\r\n  Object.assign(atom, {\r\n\r\n    attached: function (target, prop, descriptor) {\r\n\r\n      hook.after(target, 'attachedCallback', function () {\r\n        this[prop]();\r\n      });\r\n\r\n      return descriptor;\r\n\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ atom, hook }) {\r\n\r\n  Object.assign(atom, {\r\n\r\n    change: function (...properties) {\r\n\r\n      function contains(value) {\r\n        return !/\\-1/.test(properties.indexOf(value));\r\n      }\r\n\r\n      return function (target, prop, descriptor) {\r\n\r\n        hook.before(target, 'attributeChangedCallback', function (name, oldValue, newValue, predicate) {\r\n          contains(name) && (this[prop](newValue, oldValue, name), predicate.call(this, name, oldValue, newValue));\r\n        });\r\n\r\n        return descriptor;\r\n\r\n      }\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ atom }) {\r\n\r\n\tObject.assign(atom, {\r\n\r\n    component: function (tagName, extending) {\r\n      return function (target) {\r\n\r\n      \tdocument.registerElement(tagName, {\r\n          prototype: Object.assign(Object.create(HTMLElement.prototype), target.prototype),\r\n          [extending ? 'extends' : '']: extending\r\n        });\r\n\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ atom, hook }) {\r\n\r\n  Object.assign(atom, {\r\n\r\n    created: function (target, prop, descriptor) {\r\n\r\n      hook.after(target, 'createdCallback', function () {\r\n        this[prop]();\r\n      });\r\n\r\n      return descriptor;\r\n\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ atom, hook }) {\r\n\r\n  Object.assign(atom, {\r\n\r\n    detached: function (target, prop, descriptor) {\r\n\r\n      hook.after(target, 'detachedCallback', function () {\r\n        this[prop]();\r\n      });\r\n\r\n      return descriptor;\r\n\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ atom, hook }) {\r\n\r\n  Object.assign(atom, {\r\n\r\n    event: function (event, query = '*', bubbling) {\r\n      return function (target, prop, descriptor) {\r\n\r\n        function action(e) {\r\n          e.target.matches(query) && this[prop](e);\r\n        }\r\n\r\n        hook.after(target, 'createdCallback', function () {\r\n          this.addEventListener(event, action.bind(this), bubbling);\r\n        });\r\n\r\n        hook.after(target, 'detachedCallback', function () {\r\n          this.removeEventListener(event, action.bind(this), bubbling);\r\n        });\r\n\r\n        return descriptor;\r\n\r\n      };\r\n    }\r\n\r\n  });\r\n\r\n});","Rex('flip', function () {\r\n\r\n  return function (predicate) {\r\n    return function (...args) {\r\n      return predicate.apply(this, args.reverse());\r\n    };\r\n  };\r\n\r\n});","Rex('guid', function () {\r\n\r\n  return function () {\r\n    return (Date.now() * Math.random()).toString(36);\r\n  };\r\n\r\n});","Rex(function ({ hook }) {\r\n\r\n  Object.assign(hook, {\r\n    after: function (target, prop, predicate) {\r\n\r\n      (function (method) {\r\n        Object.assign(target, {\r\n        \t[prop]: function () {\r\n        \t\treturn predicate.call(this, method.apply(this, arguments));\r\n        \t}\r\n        });\r\n      })(target[prop] || function () {});\r\n\r\n    }\r\n  });\r\n\r\n});","Rex(function ({ hook }) {\r\n\r\n  Object.assign(hook, {\r\n    before: function (target, prop, predicate) {\r\n\r\n      (function (method) {\r\n        Object.assign(target, {\r\n        \t[prop]: function () {\r\n        \t\treturn predicate.apply(this, [].concat(arguments, method));\r\n        \t}\r\n        });\r\n      })(target[prop]);\r\n\r\n    }\r\n  });\r\n\r\n});","Rex('hook', () => ({}));","Rex('memoize', function ({ flip, hook }) {\r\n\r\n  return function (target, key, descriptor) {\r\n\r\n    hook.before(descriptor, 'value', flip(function (method, ...args) {\r\n      return this[`@${args}`] || (this[`@${args}`] = method.apply(this, args));\r\n    }));\r\n\r\n    return descriptor;\r\n    \r\n  }\r\n\r\n});","Rex(function ({ radio, ['radio.handlers']: handlers }) {\r\n\r\n  /**\r\n   * Estende a class radio com o metodo statico emit\r\n   */\r\n  Object.assign(radio, {\r\n\r\n    /**\r\n     * Emite uma transmissao em um canal especifico, para todos os contextos, repassando\r\n     * uma copia do que foi passado na transmissao\r\n     */\r\n    emit(channel, ...args) {\r\n      for (let [context, proxy] of handlers.entries())\r\n        for (let target of proxy[channel]) target.apply(context, JSON.parse(JSON.stringify(args)));\r\n      return this;\r\n    }\r\n\r\n  });\r\n\r\n});","Rex('radio.handlers', () => new Map);","Rex('radio', function ({ ['radio.handlers']: handlers }) {\r\n\r\n  return function radio(context) {\r\n\r\n    /**\r\n     * Para utilizarmos o new em todas as refencias, forço de\r\n     * forma transparente a criacao de uma nova instancia\r\n     */\r\n    if (!(this instanceof radio)) {\r\n      return new radio(context);\r\n    }\r\n\r\n    /**\r\n     * Conjultando o contexto com um Proxy, quey ira armazenar os\r\n     * canais\r\n     */\r\n    handlers.set(context, new Proxy({}, {\r\n\r\n      /**\r\n       * Se um canal ainda nao existir, sera criado o canal e atribuido\r\n       * um novo Set\r\n       */\r\n      get(target, name) {\r\n        return target[name] || (target[name] = new Set);\r\n      }\r\n\r\n    }));\r\n\r\n    /**\r\n     * Desliga todas as escultas\r\n     */\r\n    function drop() {\r\n      return handlers.get(context).clear(), this;\r\n    }\r\n\r\n    /**\r\n     * Localiza dentro do Map o canal pelo contexto conjulgado\r\n     */\r\n    function get(channel) {\r\n      return handlers.get(context)[channel];\r\n    }\r\n\r\n    /**\r\n     * Desliga a esculta de uma transmissao especifica\r\n     */\r\n    function off(channel, target) {\r\n      return get(channel).delete(target), this;\r\n    }\r\n\r\n    /**\r\n     * Liga a esculta para uma transmissao especifica\r\n     */\r\n    function on(channel, target) {\r\n      return get(channel).add(target), this;\r\n    }\r\n\r\n    /**\r\n     * Pattern revelation\r\n     */\r\n    return { drop, off, on };\r\n\r\n  };\r\n\r\n});","Rex(function ({ storage }) {\r\n\r\n  Object.assign(storage, {\r\n\r\n    drop: function () {\r\n      return localStorage.clear(), storage;\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ storage }) {\r\n\r\n  function parse(value) {\r\n    return /^(\\{|\\[).+(\\]|\\})$/.test(value) ? JSON.parse(value) : value;\r\n  }\r\n\r\n  Object.assign(storage, {\r\n\r\n    get: function (key, defaultValue = null) {\r\n      return parse(localStorage.getItem(key)) || defaultValue;\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ storage }) {\r\n\r\n  Object.assign(storage, {\r\n\r\n    remove: function (key) {\r\n      return localStorage.removeItem(key), storage;\r\n    }\r\n\r\n  });\r\n\r\n});","Rex(function ({ storage }) {\r\n\r\n  function is(value) {\r\n    return /(object|array)\\]$/i.test(Object.prototype.toString.call(value));\r\n  }\r\n\r\n  Object.assign(storage, {\r\n\r\n    set: function (key, value = null) {\r\n      return localStorage.setItem(key, is(value) ? JSON.stringify(value) : value), storage;\r\n    }\r\n\r\n  });\r\n\r\n});","Rex('storage', () => ({}));"]}